options:
  android:
    title: The root directory of an Android project
    env_key: PROJECT_LOCATION
    value_map:
      _:
        title: Module in an Android project
        env_key: MODULE
        value_map:
          _:
            config: default-android-config
  cordova:
    title: Directory of Cordova Config.xml
    env_key: CORDOVA_WORK_DIR
    value_map:
      _:
        title: Platform to use in cordova-cli commands
        env_key: CORDOVA_PLATFORM
        value_map:
          android:
            config: default-cordova-config
          ios:
            config: default-cordova-config
          ios,android:
            config: default-cordova-config
  fastlane:
    title: Working directory
    env_key: FASTLANE_WORK_DIR
    value_map:
      _:
        title: Fastlane lane
        env_key: FASTLANE_LANE
        value_map:
          _:
            config: default-fastlane-config
  ionic:
    title: Directory of Ionic Config.xml
    env_key: IONIC_WORK_DIR
    value_map:
      _:
        title: Platform to use in ionic-cli commands
        env_key: IONIC_PLATFORM
        value_map:
          android:
            config: default-ionic-config
          ios:
            config: default-ionic-config
          ios,android:
            config: default-ionic-config
  ios:
    title: Project (or Workspace) path
    env_key: BITRISE_PROJECT_PATH
    value_map:
      _:
        title: Scheme name
        env_key: BITRISE_SCHEME
        value_map:
          _:
            title: ipa export method
            env_key: BITRISE_EXPORT_METHOD
            value_map:
              ad-hoc:
                config: default-ios-config
              app-store:
                config: default-ios-config
              development:
                config: default-ios-config
              enterprise:
                config: default-ios-config
  macos:
    title: Project (or Workspace) path
    env_key: BITRISE_PROJECT_PATH
    value_map:
      _:
        title: Scheme name
        env_key: BITRISE_SCHEME
        value_map:
          _:
            title: |-
              Application export method
              NOTE: `none` means: Export a copy of the application without re-signing.
            env_key: BITRISE_EXPORT_METHOD
            value_map:
              app-store:
                config: default-macos-config
              developer-id:
                config: default-macos-config
              development:
                config: default-macos-config
              none:
                config: default-macos-config
  react-native:
    title: Path to the gradle file to use
    env_key: GRADLE_BUILD_FILE_PATH
    value_map:
      _:
        title: Gradlew file path
        env_key: GRADLEW_PATH
        value_map:
          _:
            title: Project (or Workspace) path
            env_key: BITRISE_PROJECT_PATH
            value_map:
              _:
                title: Scheme name
                env_key: BITRISE_SCHEME
                value_map:
                  _:
                    title: ipa export method
                    env_key: BITRISE_EXPORT_METHOD
                    value_map:
                      ad-hoc:
                        config: default-react-native-config
                      app-store:
                        config: default-react-native-config
                      development:
                        config: default-react-native-config
                      enterprise:
                        config: default-react-native-config
  xamarin:
    title: Path to the Xamarin Solution file
    env_key: BITRISE_PROJECT_PATH
    value_map:
      _:
        title: Xamarin solution configuration
        env_key: BITRISE_XAMARIN_CONFIGURATION
        value_map:
          _:
            title: Xamarin solution platform
            env_key: BITRISE_XAMARIN_PLATFORM
            value_map:
              _:
                config: default-xamarin-config
configs:
  android:
    default-android-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: android
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        deploy:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - cache-pull@2.0.1: {}
          - script@1.1.5:
              title: Do anything with Script step
          - install-missing-android-tools@2.1.1: {}
          - gradle-runner@1.8.3: {}
          - deploy-to-bitrise-io@1.3.10: {}
          - cache-push@2.0.5: {}
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - cache-pull@2.0.1: {}
          - script@1.1.5:
              title: Do anything with Script step
          - install-missing-android-tools@2.1.1: {}
          - android-unit-test@0.9.2:
              inputs:
              - project_location: $PROJECT_LOCATION
              - module: $MODULE
              - variant: $VARIANT
          - deploy-to-bitrise-io@1.3.10: {}
          - cache-push@2.0.5: {}
  cordova:
    default-cordova-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: cordova
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - script@1.1.5:
              title: Do anything with Script step
          - certificate-and-profile-installer@1.9.2: {}
          - npm@0.9.1:
              inputs:
              - command: install
              - workdir: $CORDOVA_WORK_DIR
          - generate-cordova-build-configuration@0.9.3: {}
          - cordova-archive@1.1.1:
              inputs:
              - workdir: $CORDOVA_WORK_DIR
              - platform: $CORDOVA_PLATFORM
              - target: emulator
          - deploy-to-bitrise-io@1.3.10: {}
  fastlane:
    default-fastlane-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: fastlane
      app:
        envs:
        - FASTLANE_XCODE_LIST_TIMEOUT: "120"
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - script@1.1.5:
              title: Do anything with Script step
          - certificate-and-profile-installer@1.9.2: {}
          - fastlane@2.3.12:
              inputs:
              - lane: $FASTLANE_LANE
              - work_dir: $FASTLANE_WORK_DIR
          - deploy-to-bitrise-io@1.3.10: {}
  ionic:
    default-ionic-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: ionic
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - script@1.1.5:
              title: Do anything with Script step
          - certificate-and-profile-installer@1.9.2: {}
          - npm@0.9.1:
              inputs:
              - command: install
              - workdir: $IONIC_WORK_DIR
          - generate-cordova-build-configuration@0.9.3: {}
          - ionic-archive@1.2.2:
              inputs:
              - workdir: $IONIC_WORK_DIR
              - platform: $IONIC_PLATFORM
              - target: emulator
          - deploy-to-bitrise-io@1.3.10: {}
  ios:
    default-ios-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: ios
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        deploy:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - cache-pull@2.0.1: {}
          - script@1.1.5:
              title: Do anything with Script step
          - certificate-and-profile-installer@1.9.2: {}
          - recreate-user-schemes@1.0.2:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
          - cocoapods-install@1.7.2: {}
          - xcode-test@1.18.13:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
              - scheme: $BITRISE_SCHEME
          - xcode-archive@2.4.6:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
              - scheme: $BITRISE_SCHEME
              - export_method: $BITRISE_EXPORT_METHOD
          - deploy-to-bitrise-io@1.3.10: {}
          - cache-push@2.0.5: {}
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - cache-pull@2.0.1: {}
          - script@1.1.5:
              title: Do anything with Script step
          - certificate-and-profile-installer@1.9.2: {}
          - recreate-user-schemes@1.0.2:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
          - cocoapods-install@1.7.2: {}
          - xcode-test@1.18.13:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
              - scheme: $BITRISE_SCHEME
          - deploy-to-bitrise-io@1.3.10: {}
          - cache-push@2.0.5: {}
  macos:
    default-macos-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: macos
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        deploy:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - cache-pull@2.0.1: {}
          - script@1.1.5:
              title: Do anything with Script step
          - certificate-and-profile-installer@1.9.2: {}
          - recreate-user-schemes@1.0.2:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
          - cocoapods-install@1.7.2: {}
          - xcode-test-mac@1.1.2:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
              - scheme: $BITRISE_SCHEME
          - xcode-archive-mac@1.6.2:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
              - scheme: $BITRISE_SCHEME
              - export_method: $BITRISE_EXPORT_METHOD
          - deploy-to-bitrise-io@1.3.10: {}
          - cache-push@2.0.5: {}
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - cache-pull@2.0.1: {}
          - script@1.1.5:
              title: Do anything with Script step
          - certificate-and-profile-installer@1.9.2: {}
          - recreate-user-schemes@1.0.2:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
          - cocoapods-install@1.7.2: {}
          - xcode-test-mac@1.1.2:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
              - scheme: $BITRISE_SCHEME
          - deploy-to-bitrise-io@1.3.10: {}
          - cache-push@2.0.5: {}
  other:
    other-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: other
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - script@1.1.5:
              title: Do anything with Script step
          - deploy-to-bitrise-io@1.3.10: {}
  react-native:
    default-react-native-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: react-native
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        deploy:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - script@1.1.5:
              title: Do anything with Script step
          - npm@0.9.1:
              inputs:
              - command: install
          - install-missing-android-tools@2.1.1: {}
          - gradle-runner@1.8.3:
              inputs:
              - gradle_file: $GRADLE_BUILD_FILE_PATH
              - gradle_task: assembleRelease
              - gradlew_path: $GRADLEW_PATH
          - certificate-and-profile-installer@1.9.2: {}
          - xcode-archive@2.4.6:
              inputs:
              - project_path: $BITRISE_PROJECT_PATH
              - scheme: $BITRISE_SCHEME
              - export_method: $BITRISE_EXPORT_METHOD
              - configuration: Release
          - deploy-to-bitrise-io@1.3.10: {}
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - script@1.1.5:
              title: Do anything with Script step
          - npm@0.9.1:
              inputs:
              - command: install
          - npm@0.9.1:
              inputs:
              - command: test
          - deploy-to-bitrise-io@1.3.10: {}
  xamarin:
    default-xamarin-config: |
      format_version: "4"
      default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
      project_type: xamarin
      trigger_map:
      - push_branch: '*'
        workflow: primary
      - pull_request_source_branch: '*'
        workflow: primary
      workflows:
        primary:
          steps:
          - activate-ssh-key@3.1.1:
              run_if: '{{getenv "SSH_RSA_PRIVATE_KEY" | ne ""}}'
          - git-clone@4.0.10: {}
          - script@1.1.5:
              title: Do anything with Script step
          - certificate-and-profile-installer@1.9.2: {}
          - xamarin-user-management@1.1.0:
              run_if: .IsCI
          - nuget-restore@1.0.5: {}
          - xamarin-components-restore@0.9.0: {}
          - xamarin-archive@1.5.0:
              inputs:
              - xamarin_solution: $BITRISE_PROJECT_PATH
              - xamarin_configuration: $BITRISE_XAMARIN_CONFIGURATION
              - xamarin_platform: $BITRISE_XAMARIN_PLATFORM
          - deploy-to-bitrise-io@1.3.10: {}
